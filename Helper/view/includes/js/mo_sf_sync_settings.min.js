function mo_sf_sync_valid_query(e){!/^[a-zA-Z?,.\(\)\/@ 0-9]*$/.test(e.value)&&(e.value=e.value.replace(/[^a-zA-Z?,.\(\)\/@ 0-9]/,""))}function redirect_to_field_mapping(){window.location.href=window.location+"&tab=manage_users"}function redirect_to_pardot_guide(){url=window.location.href;var e=url.split("?"),n=e[0];window.location.href=n+"?page=pardot_guide"}function close_and_redirect_to_advance_sync(){window.location.href=window.location+"&tab=advance_sync_options"}function mo_sf_sync_show_manual_configuration(){jQuery(".automatic_display").show(),jQuery(".manual_display").hide(),jQuery("#back_to_automatic").show(),jQuery("#back_to_manual").hide(),jQuery("#configuration_body").show(),jQuery("#auto-config").hide(),jQuery("#manual-config").show(),jQuery("#save_config").show(),jQuery("#test-config").show(),jQuery("input[name='client_id']").prop("required",!0).prop("disabled",!1),jQuery("input[name='client_secret']").prop("required",!0).prop("disabled",!1),jQuery("input[name='redirect_uri']").prop("required",!0).prop("disabled",!1),jQuery("#automatic-app-connect").hide(),jQuery("#manual-app-connect").show()}function mo_sf_sync_show_automatic_configuration(){jQuery(".automatic_display").hide(),jQuery(".manual_display").show(),jQuery("#back_to_automatic").hide(),jQuery("#back_to_manual").show(),jQuery("#configuration_body").show(),jQuery("#manual-config").hide(),jQuery("#auto-config").show(),jQuery("#save_config").hide(),jQuery("#test-config").show(),jQuery("input[name='client_id']").prop("required",!1).prop("disabled",!0),jQuery("input[name='client_secret']").prop("required",!1).prop("disabled",!0),jQuery("input[name='redirect_uri']").prop("required",!1).prop("disabled",!0),jQuery("#automatic-app-connect").show(),jQuery("#manual-app-connect").hide()}function mo_sf_sync_show_config_window(){function e(e){var n=e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);return null!==n}let n=jQuery("input[name='client_id']").val(),t=encodeURI(jQuery("input[name='redirect_uri']").val()),o=jQuery("input[name='env_link']").val();if(!1===o.endsWith(".salesforce.com"))return;let i=encodeURI(o+`/services/oauth2/authorize?response_type=code&grant_type=authorization_code&scope=api refresh_token&client_id=${n}&redirect_uri=${t}`);if(n&&t&&e(i))window.open(i,"Salesforce Authorization","scrollbars=1 width=800, height=600");else alert(`Invalid client credentials: ${n?"":"client id"} ${t?"":"redirect uri"}`)}function mo_sf_sync_show_config_window_for_pre_connected_app(){function e(e){var n=e.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);return null!==n}let n=document.getElementById("is_pardot_int_enabled").checked,t="3MVG9ZL0ppGP5UrDG2dF37_B5GQiUeXQmGPtH0qf6eemjdTTRb5XHUppenzIsq5dI8EBkXWSGoPFTXKzvkUOR",o="https://connect.xecurify.com/",i=jQuery("input[name='env_link']").val();if(!1===i.endsWith(".salesforce.com")&&null!=i)return;let s=jQuery("#mo_sf_sync_home_url").val();scopes=!0===n?"api refresh_token pardot_api":"api refresh_token";let a=i+"/services/oauth2/authorize?response_type=code&state="+s+`&grant_type=authorization_code&scope=${scopes}&client_id=${t}&redirect_uri=${o}`;if(t&&o&&e(a))window.open(a,"Salesforce Authorization","scrollbars=1 width=800, height=600");else alert(`Invalid client credentials: ${t?"":"client id"} ${o?"":"redirect uri"}`)}function remove_previous(){jQuery(".req_elements").remove(),jQuery(".onclick_elements").remove()}function enable_authorize(){jQuery("#authorize").prop("disabled",!1)}function enable_test_config(){jQuery("#test-config").prop("disabled",!1)}function test_configuration_status(){jQuery("#test-config1").prop("disabled",!1),jQuery("#preconn_conn_to_sf").val("Reconnect To Salesforce")}function mo_sf_sync_change_direction(e){if("sync_wp_to_sf"==e)dis_toggle="sync_sf_to_wp",jQuery(".req-field-delete-button").empty(),jQuery(".required-fields-asterisk").append('<span style="color:red;font-style: italic;">*</span>');else{dis_toggle="sync_wp_to_sf";let e=jQuery("#Removed_field").val();e=" ' "+`${e}`+" ' ",jQuery(".required-fields-asterisk").empty(),jQuery(".req-field-delete-button").append(`<button type="button" style="border:none;cursor:pointer;background:none">\n                <span class="dashicons dashicons-trash" onclick="deleteAttr(event,${e});return false;"></span>\n            </button>`)}!0===jQuery("#"+e).is(":checked")&&jQuery("#"+dis_toggle).prop("checked",!1)}function mo_sf_sync_test_connection(e){home_url=jQuery("#mo_sf_sync_home_url").val(),url=home_url+`?option=mo_sf_sync_test_connection&mo_sf_sync_wpid=${e}`,window.open(url,"Salesforce Test Connection","scrollbars=1 width=800, height=600")}function mo_sf_sync_copyToClipboard(e,n,t){var o=jQuery("<input>");jQuery("body").append(o),o.val(jQuery(n).text()).select(),document.execCommand("copy"),o.remove(),jQuery(t).text("Copied"),jQuery(e).mouseout(function(){jQuery(t).text("Copy to Clipboard")})}function mo_sf_sync_dismiss_int_trial_notification_bar(){let e=new FormData;e.append("integration_trial_request","integration_trial_request_box_dissmissed"),e.append("action","mo_sf_sync_ajax_submit"),ajax_request=jQuery.ajax({url:ajax_object_sf.ajax_url_sf,type:"POST",data:e,processData:!1,contentType:!1}),ajax_request.done(e=>{"transient_set_successfully"==e.data&&jQuery("#int_trial_div_id").remove()})}function mo_sf_sync_dismiss_notification_bar(){let e=new FormData;e.append("trial_request","trial_request_box_dissmissed"),e.append("action","mo_sf_sync_ajax_submit"),ajax_request=jQuery.ajax({url:ajax_object_sf.ajax_url_sf,type:"POST",data:e,processData:!1,contentType:!1}),ajax_request.done(e=>{1==e.data&&jQuery("#normal_trial_div_id").remove()})}function mo_sf_sync_add_attr(){let e=document.querySelector("#sel_sf_field").value;if(-1===e.indexOf(",")&&(field_name=e.split("("),field_object=field_map.get(field_name[0].trim()),e=!0===field_object.updateable?field_object.name+","+field_object.type+","+field_object.length+",updatable":field_object.name+","+field_object.type+","+field_object.length+",non_updatable")," "===e||void 0===e||""===e)return void alert("Please Select a Salesforce field first");var n=document.getElementById("sel_sf_field");n.remove(n.selectedIndex);const t=e.split(",");"picklist"==t[1]?(def="Standard Fields",option="Conditional Field"):(def="Standard WordPress Fields",option="Static"),removed_field=" ' "+`${t[0]}`+" ' ";let o=jQuery(".new_fields_div").append(`\n            <div>\n                <section class="accordion">\n                    <input type="checkbox" name="collapse" checked="checked">\n                    <input type="hidden" name="sf_fields[]" value="${t[0]}">\n                    <input type="hidden" name="name_constraint[]" value="${t[0]}">\n                    <input type="hidden" name="type_constraint[]" value="${t[1]}">\n                    <input type="hidden" name="maxlength_constraint[]" value="${t[2]}">\n                    <input type="hidden" name="updatable_status[]" value="${t[3]}">\n                    <h2 class="handle">\n                        <label class = "mo-sf-sync-coll-div-head"><b>${t[0]}</b><span style="font-size: 14px !important;font-style: italic;">  [Name: ${t[0]}, Type: ${t[1]}, Max-Length: ${t[2]}] </span>\n                        <button type="button" style="float:right ;border:none;cursor:pointer;background:none" ><span class="dashicons dashicons-trash" onclick="deleteAttr(event,${removed_field});return false;"></span></button>\n                        </label>\n                    </h2>\n                    <div class="mo-sf-dflex content" style="border-bottom: 0;">\n                        <div class=" mo-sf-col-md-3" style="border-bottom:none">\n                            <span>Field Type</span>\n                        </div>\n                        <div class="mo-sf-col-md-8-field-mapping">\n                            <div>\n                                <select class="form-control" style="width: 300px;" id="field_type_${t[0]}" name="field_types[]" ">\n                                    <option value="standard">${def}</option> \n                                    <option value="static">${option}</option> \n                                </select>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="mo-sf-dflex content" style="margin-top:-20px;margin-bottom:-20px;border-bottom:none">\n                        <div class="mo-sf-col-md-3">\n                            <span>Select field</b></span>\n                        </div>\n                        <div class="mo-sf-col-md-8-field-mapping">\n                            <div id="sync_sel_fields_div_${t[0]}">\n                                \n                            </div>\n                        </div>\n                    </div>    \n                </section>\n            </div>\n            `);o.children().last().children().find("select").selectWoo({});let i=field_map.get(t[0]);selected_type="",jQuery("#field_type_"+i.name).on("change",function(){selected_type=jQuery(this).val(),"static"==selected_type?"picklist"===i.type?jQuery("#sync_sel_fields_div_"+i.name).children().remove().end().append(mo_sf_sync_show_object_mapping_for_picklist(i.name)).find("select").selectWoo({}):jQuery("#sync_sel_fields_div_"+i.name).children().remove().end().append('<input type="text" name="wordpress_fields[]" class="custom_fields" style="width:300px;"/>'):"picklist"===i.type?(options='<select name="wordpress_fields[]"  style="width: 300px;">',i.picklistValues.forEach(({value:e,label:n})=>{options+=`<option value="${e}">${n}</option>`}),options+="</select>",jQuery("#sync_sel_fields_div_"+i.name).children().remove().end().append(options).find("select").selectWoo({})):"boolean"===i.type?(options='\n                    <select name="wordpress_fields[]" style="width: 300px;">\n                        <option>true</option>\n                        <option>false</option>\n                    </select>\n                    ',jQuery("#sync_sel_fields_div_"+i.name).children().remove().end().append(options).find("select").selectWoo({}).append(options)):jQuery("#sync_sel_fields_div_"+i.name).children().remove().end().append(`\n                        <select class="form-control wp_field select2" style="width: 300px;" name="wordpress_fields[]">\n                            ${mo_sf_sync_create_wp_fields()}\n                        </select>\n                    `).find("select").selectWoo({})}),"picklist"===i.type?(options='<select name="wordpress_fields[]"  style="width: 300px;">',i.picklistValues.forEach(({value:e,label:n})=>{options+=`<option value="${e}">${n}</option>`}),options+="</select>",jQuery("#sync_sel_fields_div_"+i.name).children().remove().end().append(options).find("select").selectWoo({})):"boolean"===i.type?(options='\n            <select name="wordpress_fields[]" style="width: 300px;">\n                <option>true</option>\n                <option>false</option>\n            </select>\n            ',jQuery("#sync_sel_fields_div_"+i.name).children().remove().end().append(options).find("select").selectWoo({}).append(options)):jQuery("#sync_sel_fields_div_"+i.name).children().remove().end().append(`\n                <select class="form-control wp_field select2" style="width: 300px;" name="wordpress_fields[]">\n                    ${mo_sf_sync_create_wp_fields()}\n                </select>\n            `).find("select").selectWoo({})}function mo_sf_sync_show_object_mapping_for_picklist(e){index=jQuery(".sf-wp-mapping-div").children(".accordion").size()+jQuery(".new_fields_div").children().size()-1,field=field_map.get(e);let n="";"picklist"===field.type&&field.picklistValues.forEach(({value:e,label:t})=>{n+=`<option value="${e}">${t}</option>`});let t=`\n            <input type="button" class="mo-sf-btn-cstm" value="Add Condition" id="add_picklist_condition" style="margin-bottom: 20px;" onclick="mo_sf_sync_add_condition_for_picklist('${e}')">\n            <div id="picklist_conditon_table_${e}" >\n                <div></div>\n                <div style="text-align:center">\n                    <div class="mo-sf-dflex">\n                        <div>\n                            <select class="form-control wp_field" name="wordpress_fields[${index}][picklist_wp_fields][]" style="width:115px">\n                                ${mo_sf_sync_create_wp_fields()}\n                            </select>\n                        </div>\n                        <div><span>Must</span></div>\n                        <div>\n                            <select class="form-control operator" name="wordpress_fields[${index}][picklist_conditions][]" style="width:115px" >\n                            <option value='starts-with'>Start With</option>\n                            <option value='ends-with'>End With</option>\n                            <option value='includes'>Includes</option>\n                            <option value='must-not-include'>Not Include</option>\n                            </select>\n                        </div>\n                        <div ><span>the value</span></div>\n                        <div>\n                            <input type="text" class="form-control" name="wordpress_fields[${index}][picklist_output][]" style="width:115px" required>\n                        </div>\n                        <div >then value synced will be</div>\n                        <div >\n                            <select name="wordpress_fields[${index}][picklist_result][]" id="picklist_result_${e}" style="width:115px">\n                                ${n}\n                            </select>\n                        </div>\n                        <div>\n                            <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;return t}function mo_sf_sync_add_condition_for_picklist(e){index=jQuery(".sf-wp-mapping-div").children(".accordion").size()+jQuery(".new_fields_div").children().size()-1,table=`picklist_conditon_table_${e}`,field=field_map.get(e),newoptions="","picklist"===field.type&&field.picklistValues.forEach(({value:e,label:n})=>{newoptions+=`<option value="${e}">${n}</option>`});let n=jQuery("#"+table).append(`\n        <div style="text-align:center">\n            <div class="mo_sf_sync_conditional_or">OR</div>\n            <div class="mo-sf-dflex">\n                <div>\n                    <select class="form-control wp_field" name="wordpress_fields[${index}][picklist_wp_fields][]" style="width:115px">\n                        ${mo_sf_sync_create_wp_fields()}\n                    </select>\n                </div>\n                <div><span>Must</span></div>\n                <div>\n                    <select class="form-control operator" name="wordpress_fields[${index}][picklist_conditions][]" style="width:115px" >\n                        <option value='starts-with'>Start With</option>\n                        <option value='ends-with'>End With</option>\n                        <option value='includes'>Includes</option>\n                        <option value='must-not-include'>Not Include</option>\n                    </select>\n                </div>\n                <div><span>this value</span></div>\n                <div>\n                    <div><input type="text" class="form-control" name="wordpress_fields[${index}][picklist_output][]" style="width:115px" required></div>\n                </div>\n                <div><span>then value synced will be</span></div>\n                <div>\n                    <select name="wordpress_fields[${index}][picklist_result][]" id="picklist_result_${e}" style="width:115px">\n                        ${newoptions}\n                    </select>\n                </div>\n                <div>\n                    <button type = 'button' class="button del_row_btn mo-sf-btn-cstm" id="button-delete" onclick="deletepicklistcondition(event);return false;">X</button>\n                </div>\n            </div>\n        </div>\n        `);n.children().last().children().find("select").selectWoo({})}function deletepicklistcondition(e){jQuery(e.target).parent().parent().parent().empty()}function deletesavedpickcondition(e){jQuery(e.target).parent().parent().empty()}function mo_sf_sync_change_field_type(e){let n=field_map.get(e);if(selected_type=document.querySelector("#field_type_"+n.name).value,"static"==selected_type)if("picklist"===n.type){jQuery("#sync_sel_fields_div_"+n.name).children().remove().end().append(mo_sf_sync_show_object_mapping_for_picklist(n.name)).find("select").selectWoo({})}else jQuery("#sync_sel_fields_div_"+n.name).children().remove().end().append('<input type="text" name="wordpress_fields[]" class="custom_fields" style="width:300px;"/>');else"picklist"===n.type?(options='<select name="wordpress_fields[]"  style="width: 300px;">',n.picklistValues.forEach(({value:e,label:n})=>{options+=`<option value="${e}">${n}</option>`}),options+="</select>",jQuery("#sync_sel_fields_div_"+n.name).children().remove().end().append(options).find("select").selectWoo({})):"boolean"===n.type?(options='\n            <select name="wordpress_fields[]" style="width: 300px;">\n                <option>true</option>\n                <option>false</option>\n            </select>\n            ',jQuery("#sync_sel_fields_div_"+n.name).children().remove().end().append(options).find("select").selectWoo({}).append(options)):jQuery("#sync_sel_fields_div_"+n.name).children().remove().end().append(`\n                <select class="form-control wp_field select2" style="width: 300px;" name="wordpress_fields[]">\n                    ${mo_sf_sync_create_wp_fields()}\n                </select>\n            `).find("select").selectWoo({})}function mo_sf_sync_open_window_for_authorization(e){home_url=document.getElementById("mo_sf_sync_home_url").value,url=home_url+`?option=authorization_flow&app_type=${e}`,window.open(url,"Connect To Salesforce","scrollbars=1 width=800, height=600")}function mo_sf_sync_make_email_editable(){email_sent=document.getElementById("email-sent-id"),email=email_sent.innerText,email_sent.innerHTML=`<input type='text' required id="mo_sf_sync_demo_email" name='mo_sf_sync_demo_email' class='mo_sf_sync_email_input' value='${email}'>`}function mo_sf_sync_show_business_uid(e){!0===e.target.checked?(document.getElementById("pardot_business").hidden=!1,document.getElementById("pardot_env").hidden=!1,document.getElementById("pardot_business_uid").setAttribute("required","")):(document.getElementById("pardot_business").hidden=!0,document.getElementById("pardot_env").hidden=!0,document.getElementById("pardot_business_uid").removeAttribute("required"))}function mo_sf_sync_assign_url_for_buid(){jQuery(".mo-sf-sync-pid-button").attr("href",jQuery("input[name=env_link]").val()+"/lightning/setup/PardotAccountSetup/home")}var field_map=new Map;jQuery(document).ready(function(e){function n(e){if(void 0===e)return!1;let n=new FormData;n.append("wp_object",e),n.append("action","mo_sf_sync_ajax_submit"),ajax_request=jQuery.ajax({url:ajax_object_sf.ajax_url_sf,type:"POST",data:n,processData:!1,contentType:!1}),ajax_request.done(e=>{if(e.data.error_description){let n=e.data.error_description;return!0!==n&&"true"!==n||(n="Please reload the page once!"),alert(n),[]}h=e.data,jQuery(".wp_field").each(function(){let e=jQuery(this);e.find("option").remove().end(),daraattt=mo_sf_sync_create_wp_fields(e.attr("data-field")),e.append(daraattt)})})}function t(e,n=!1){jQuery("#savebutton").prop("disabled",!0);let t=new FormData;t.append("object",e),t.append("action","mo_sf_sync_ajax_submit"),ajax_request=jQuery.ajax({url:ajax_object_sf.ajax_url_sf,type:"POST",data:t,processData:!1,contentType:!1,beforeSend:function(){jQuery("#sf-obj-search").prop("hidden",!1),jQuery(".field_mapping").prop("hidden",!0),jQuery("#save_obj_map_btn").prop("hidden",!0)},complete:function(){jQuery("#sf-obj-search").prop("hidden",!0),jQuery(".field_mapping").prop("hidden",!1),jQuery("#save_obj_map_btn").prop("hidden",!1)}}),ajax_request.done(e=>{if(e.data.error_description){let n=e.data.error_description;return!0!==n&&"true"!==n||(n="Please reload the page once!"),void alert(n)}switch(f=e.data.fields||[],s(),jQuery(".object_field").each(function(){let e=jQuery(this);e.find("option").remove().end(),e.append(mo_sf_sync_create_fields(e.attr("data-field")))}),req_fields_present=jQuery("#set_field_map").length,req_fields_present){case 0:n&&(jQuery(".sf-wp-mapping-div").empty(),f.forEach(e=>{!e.createable||e.nillable||e.defaultedOnCreate||"boolean"===e.type||_(e)}));break;case 1:jQuery(".sf-wp-mapping-div").empty(),f.forEach(e=>{!e.createable||e.nillable||e.defaultedOnCreate||"boolean"===e.type||_(e)})}o()}),ajax_request.fail(e=>{})}function o(){dom=jQuery(".sf-wp-mapping-div").append(`\n            <div class="new_fields_div ">\n            </div>\n            <div>\n                <section class="accordion">\n                    <input type="checkbox" name="collapse" checked="checked">\n                    <h2 class="handle">\n                        <label class = "mo-sf-sync-coll-div-head" ><b>Add New Salesforce Field</b></label>\n                    </h2>\n                    <div class="mo-sf-dflex content">\n                        <div class=" mo-sf-col-md-8" >\n                            <select class="form-control object_field" id="sel_sf_field" style="width:300px">\n                                ${mo_sf_sync_create_fields()}\n                            </select>\n                        </div>\n                        <div class="mo-sf-col-md-4">\n                            <div id="add_sf_attr">\n                                <input type="button" class="form-control mo-sf-btn-cstm" value="Add Salesforce Field" onclick = "mo_sf_sync_add_attr()">\n                            </div>\n                        </div>\n                    </div>            \n                </section>\n            </div>\n            `),dom.children().last().children().find("select").selectWoo({})}function s(){f.sort((e,n)=>!e.createable||e.nillable||e.defaultedOnCreate||"boolean"===e.type?!n.createable||n.nillable||n.defaultedOnCreate||"boolean"===n.type?0:1:-1),y.clear();let e=0;f.forEach(n=>{!n.createable||n.nillable||n.defaultedOnCreate||"boolean"===n.type||y.set(n.name,n.label),m.set(n.name,n.type,n.length),n.updateable&&e++}),a(e),field_map.clear(),f.forEach(function(e){field_map.set(e.name,e)})}function a(e){0==e?(jQuery(".object_field").prop("disabled",!0),jQuery("#mo_sf_sync_add_rows").prop("disabled",!0),jQuery(".wordpress_field").prop("disabled",!0),jQuery(".custom_fields").prop("disabled",!0),jQuery("#mo_sf_sync_add_rows").prop("disabled",!0),jQuery("#mo_sf_sync_add_rows_custom").prop("disabled",!0),jQuery("#mo_sf_sync_add_rows_custom").prop("readonly",!0),jQuery("#savebutton").prop("disabled",!0),jQuery(".del_row_btn").prop("disabled",!0),jQuery(".mo-sf-sync-no-fields").css({display:"inline"})):(jQuery(".object_field").prop("disabled",!1),jQuery("#mo_sf_sync_add_rows").prop("disabled",!1),jQuery(".wordpress_field").prop("disabled",!1),jQuery(".custom_fields").prop("disabled",!1),jQuery("#mo_sf_sync_add_rows").prop("disabled",!1),jQuery("#mo_sf_sync_add_rows_custom").prop("disabled",!1),jQuery("#mo_sf_sync_add_rows_custom").prop("readonly",!1),jQuery("#savebutton").prop("disabled",!1),jQuery(".del_row_btn").prop("disabled",!1),jQuery(".mo-sf-sync-no-fields").css({display:"none"}))}function l(e){let n=jQuery(".mo-sf-sync-loader-container");n.appendTo(e),jQuery("#success_m").addClass("mo-sf-sync-loader").position({my:"right center",at:"right bottom",of:"#targetElement"}),jQuery("#error_m").addClass("mo-sf-sync-loader"),jQuery("#support_m").addClass("mo-sf-sync-loader"),jQuery("#loader").removeClass("mo-sf-sync-loader")}function d(e,n){if(jQuery("#loader").addClass("mo-sf-sync-loader"),1==e.success)if(jQuery("#saved_object").attr("data-saved-object",jQuery("#object_select").val()),jQuery(".object_field").each(function(){jQuery(this).attr("data-field",jQuery(this).val())}),"mo_sf_sync_contact_us_query_option"===n){jQuery("#support_m").addClass("mo-sf-sync-loader");jQuery.makeArray(jQuery("#support_m"));jQuery("#support_m").removeClass("mo-sf-sync-loader")}else jQuery("#success_m").removeClass("mo-sf-sync-loader").position({my:"right center",at:"right bottom",of:"#targetElement"});else jQuery("#error_m").removeClass("mo-sf-sync-loader")}function r(e){jQuery("#loader").addClass("mo-sf-sync-loader"),jQuery("#error_m").removeClass("mo-sf-sync-loader")}function c(){let e=new FormData;e.append("query",jQuery("input[name='query']").val()),e.append("action","mo_sf_sync_ajax_submit"),ajax_request=jQuery.ajax({url:ajax_object_sf.ajax_url_sf,type:"POST",data:e,processData:!1,contentType:!1}),ajax_request.done(e=>{if(Array.isArray(e.data)){let n="";e.data.forEach(function(e){n+=`<option value="${e.data.ID}">${e.data.user_login}</option>`}),""==n?jQuery("#push_plh").prop("hidden",!1):(jQuery("#push_plh").prop("hidden",!0),jQuery("#upn_id").find("option").remove().end().append(n))}}),ajax_request.fail(e=>{})}function p(e){switch(e){case"auto":jQuery("#auto-config").prop("hidden",!1),jQuery("#manual-config").prop("hidden",!0);break;case"manual":jQuery("#manual-config").prop("hidden",!1),jQuery("#auto-config").prop("hidden",!0)}}function _(e){"picklist"==e.type?(def="Standard Fields",option="Conditional Field"):(def="Standard WordPress Fields",option="Static"),dom=jQuery(".sf-wp-mapping-div").append(`       \n            <section class="accordion">\n                <input type="checkbox" name="collapse" checked="checked">\n                <input type="hidden" name="sf_fields[]" value="${e.name}">\n                <input type="hidden" name="name_constraint[]" value="${e.name}">\n                <input type="hidden" name="type_constraint[]" value="${e.type}">\n                <input type="hidden" name="maxlength_constraint[]" value="${e.size}">\n                <input type="hidden" id="Removed_field" name="Removed_field" value="${e.name}">\n                <h2 class="handle">\n                    <label class = "mo-sf-sync-coll-div-head" ><b>${e.label}<span class="required-fields-asterisk" style="color:red;font-style: italic;">*</span></b><span style="font-size: 14px !important;font-style: italic;">  [Name: ${e.name}, Type: ${e.type}, Max-length: ${e.size}] </span>\n                    <div class="req-field-delete-button" style="float:right ;"></div>\n                    </label>\n                </h2>\n                <div class="mo-sf-dflex content" style="border-bottom: 0;">\n                    <div class=" mo-sf-col-md-3" style="border-bottom:none">\n                        <span>Field Type</span>\n                    </div>\n                    <div class="mo-sf-col-md-8-field-mapping">\n                        <div>\n                            <select class="form-control" style="width: 300px;" id="field_type_${e.name}" name="field_types[]">\n                                <option value="standard">${def}</option> \n                                <option value="static">${option}</option> \n                            </select>\n                        </div>\n                    </div>\n                </div>\n                <div class="mo-sf-dflex content" style="margin-top:-20px !important">\n                    <div class="mo-sf-col-md-3">\n                        <span>Select field</b></span>\n                    </div>\n                    <div class="mo-sf-col-md-8-field-mapping">\n                        <div id="sync_sel_fields_div_${e.name}">\n                            \n                        </div>\n                    </div>\n                </div>                \n\t\t    </section>            \n            `),dom.children().last().children().find("select").selectWoo({}),selected_type="",jQuery("#field_type_"+e.name).on("change",function(){selected_type=jQuery(this).val(),"static"==selected_type?"picklist"===e.type?jQuery("#sync_sel_fields_div_"+e.name).children().remove().end().append(mo_sf_sync_show_object_mapping_for_picklist(e.name)).find("select").selectWoo({}):jQuery("#sync_sel_fields_div_"+e.name).children().remove().end().append('<input type="text" name="wordpress_fields[]" class="custom_fields" style="width:300px;"/>'):"picklist"===e.type?(options='<select name="wordpress_fields[]"  style="width: 300px;">',e.picklistValues.forEach(({value:e,label:n})=>{options+=`<option value="${e}">${n}</option>`}),options+="</select>",jQuery("#sync_sel_fields_div_"+e.name).children().remove().end().append(options).find("select").selectWoo({})):"boolean"===e.type?(options='\n                    <select name="wordpress_fields[]" style="width: 300px;">\n                        <option>true</option>\n                        <option>false</option>\n                    </select>\n                    ',jQuery("#sync_sel_fields_div_"+e.name).children().remove().end().append(options).find("select").selectWoo({}).append(options)):jQuery("#sync_sel_fields_div_"+e.name).children().remove().end().append(`\n                        <select class="form-control wp_field select2" style="width: 300px;" name="wordpress_fields[]">\n                            ${mo_sf_sync_create_wp_fields()}\n                        </select>\n                    `).find("select").selectWoo({})}),"picklist"===e.type?(options='<select name="wordpress_fields[]"  style="width: 300px;">',e.picklistValues.forEach(({value:e,label:n})=>{options+=`<option value="${e}">${n}</option>`}),options+="</select>",jQuery("#sync_sel_fields_div_"+e.name).children().remove().end().append(options).find("select").selectWoo({})):"boolean"===e.type?(options='\n            <select name="wordpress_fields[]" style="width: 300px;">\n                <option>true</option>\n                <option>false</option>\n            </select>\n            ',jQuery("#sync_sel_fields_div_"+e.name).children().remove().end().append(options).find("select").selectWoo({}).append(options)):jQuery("#sync_sel_fields_div_"+e.name).children().remove().end().append(`\n                <select class="form-control wp_field select2" style="width: 300px;" name="wordpress_fields[]">\n                    ${mo_sf_sync_create_wp_fields()}\n                </select>\n            `).find("select").selectWoo({})}function u(e){switch(pardot_buid_path="/lightning/setup/PardotAccountSetup/home",e){case"prod":jQuery("input[name=env_link]").prop("readonly",!0).hide(),jQuery("#auth_uri").hide(),jQuery("input[name=env_link]").prop("value","https://login.salesforce.com"),jQuery(".mo-sf-sync-pid-button").attr("href","https://login.salesforce.com"+pardot_buid_path);break;case"test":jQuery("input[name=env_link]").prop("readonly",!0).hide(),jQuery("#auth_uri").hide(),jQuery("input[name=env_link]").prop("value","https://test.salesforce.com"),jQuery(".mo-sf-sync-pid-button").attr("href","https://test.salesforce.com"+pardot_buid_path);break;case"custom":jQuery("input[name=env_link]").prop("readonly",!1).show(),jQuery("#auth_uri").show();let n=jQuery("input[name=env_link]","#app_config_save_client_configuration").val();-1!==jQuery.inArray(n,["","https://login.salesforce.com","https://test.salesforce.com"])&&(jQuery("input[name=env_link]").prop("value",""),jQuery("input[name=env_link]").prop("placeholder","Enter Custom URL (NOTE: URL must end with '.salesforce.com')").prop("required",!0))}}var f,y=new Map,m=new Map;c();let h=jQuery("#mo-sf-sync-wpfields").html();var v=jQuery("#wp_object_select").val();n(v),jQuery("select").selectWoo({}),setTimeout(()=>{jQuery(".mo-sf-sync-alert").fadeOut("slow")},1e4),jQuery("#object_select").attr("data-object")&&t(jQuery("#object_select").attr("data-object")),jQuery("#wp_object_select").on("change",function(){let e=jQuery(this).val();n(e),
jQuery(".mo_sf_sync_show_wp_obj").val(e),"post"==e?jQuery("#taxonomy-sync-section").prop("hidden",!1):jQuery("#taxonomy-sync-section").prop("hidden",!0)}),window.mo_sf_sync_create_wp_fields=function(e){let n="",t=jQuery("#saved_object").attr("data-saved-object"),o=jQuery("#wp_object_select").val();return h.forEach(i=>{n+=`<option value=${i} ${t==o&&e==i?"selected":""}>`,n+=`${i}</option>`}),n},window.mo_sf_sync_create_fields=function(e){let n="<option id='sf_field_options' value=''>Select A New Salesforce field</option>",t=jQuery("#saved_object").attr("data-saved-object"),o=jQuery("#object_select").val();var i=jQuery("#saved_mapping").val(),s=!1;return i&&(s=JSON.parse(i)),f.forEach(i=>{if(i.updateable){if(i.createable&&!i.nillable&&!i.defaultedOnCreate&&"boolean"!==i.type||0!=s&&-1!==jQuery.inArray(i.name,s))return;n+=`<option value=${[i.name,i.type,i.length,"updatable"]} ${t==o&&e==i.name?"selected":""}>`,!i.createable||i.nillable||i.defaultedOnCreate||"boolean"===i.type||(n+='<span style="color:red;">*</span> '),n+=`${i.label} (${i.type})</option>`}else n+=`<option value=${[i.name,i.type,i.length,"non_updatable"]} ${t==o&&e==i.name?"selected":""}>`,n+=`${i.label} (${i.type}) [Non Updatable Field]</option>`}),n},jQuery("#object_select").on("change",function(){jQuery(".preloader").fadeIn("slow");let e=jQuery(this).val();""!==e?t(e,!0):jQuery(".field_mapping").prop("hidden",!0)}),jQuery.fn.center=function(e){return e=e?this.parent():window,this.css({position:"absolute",top:(jQuery(e).height()-this.outerHeight())/2+jQuery(e).scrollTop()+"px",left:(jQuery(e).width()-this.outerWidth())/2+jQuery(e).scrollLeft()+"px"}),this},jQuery("div.myclass:nth-child(1)").center(!0),jQuery(".mo_sf_sync_ajax_submit_form").submit(function(e){e.preventDefault();let n=jQuery(this).find(".loader-placeholder"),t=jQuery(this).find("input[name='option']").val();if("mo_sf_sync_client_object"===t){let e=new Map(y),n=[];if(jQuery(".object_field").each(function(){let t=jQuery(this).val();e.has(t)?e.delete(t):n.push(jQuery(this).find(":selected").text())}),e.size)return void alert("Required field missing: "+Array.from(e.values()).join(", "));if(i=0,jQuery(".wordpress_field").each(function(){let e=jQuery(this).val();""===e&&i++}),i)return void alert("Mapping with --none-- ")}let o=jQuery(this).find("input[name='nonce_']").val(),s=jQuery(this).find("input[name='tab']").val(),a=jQuery(this).find("input:not([name='option'],[name='tab'],[name='nonce_']), select, textarea").serialize(),c=new FormData;c.append("action","mo_sf_sync_ajax_submit"),c.append("option",t),c.append("tab",s),c.append("nonce_",o),c.append("data",a),ajax_request=jQuery.ajax({url:ajax_object_sf.ajax_url_sf,type:"POST",data:c,processData:!1,contentType:!1,beforeSend:function(){l(n)}}),ajax_request.done(function(e){d(e,t)}),ajax_request.fail(r)}),jQuery("#push_attributes").click(function(){return wpid=jQuery("select[name='upn_id']").val(),mo_sf_sync_test_connection(wpid),!1}),jQuery("#reports_table").DataTable({order:[[6,"desc"]]}),jQuery("#search_users").click(c),jQuery("#enter_search").on("keypress",function(e){if(13==e.which){let e=new FormData;e.append("query",jQuery("input[name='query']").val()),e.append("action","mo_sf_sync_ajax_submit"),ajax_request=jQuery.ajax({url:ajax_object_sf.ajax_url_sf,type:"POST",data:e,processData:!1,contentType:!1}),ajax_request.done(e=>{if(Array.isArray(e.data)){let n="";e.data.forEach(function(e){n+=`<option value="${e.data.ID}">${e.data.user_login}</option>`}),""==n?jQuery("#push_plh").prop("hidden",!1):(jQuery("#push_plh").prop("hidden",!0),jQuery("#upn_id").find("option").remove().end().append(n))}}),ajax_request.fail(e=>{})}}),jQuery("#mo_sf_sync_add_rows").click(function(){let e=jQuery("#mo-sf-sync-custom-attr").append(`            \n            <tr class="onclick_elements">\n                <td class="left-div">\n                    <select class="form-control object_field" style="width:300px"  name="${jQuery("#mo-sf-sync-wpfields").first().val()}" >\n                        ${mo_sf_sync_create_fields()}\n                    </select>\n                </td>\n                <td class="right-div">\n                    <select class="form-control wp_field" style="width:100%" onchange="changeWPField(event)">\n                        ${mo_sf_sync_create_wp_fields()}\n                    </select>\n                </td>\n                <td>\n                        <button class="button del_row_btn mo-sf-btn-cstm" onclick="deleteAttr(event);return false;">X</button>\n                </td>\n            </tr>\n            `);e.children().last().children().find("select").selectWoo({})}),jQuery("#mo_sf_sync_add_rows_custom").click(function(){let e=jQuery("#mo-sf-sync-custom-attr-val").append(`            \n            <tr>\n                <td class="left-div">\n                    <select class="form-control object_field mo_sf_sync_custom" onchange="changeField(event); return false;">\n                        ${mo_sf_sync_create_fields()}\n                    </select>\n                </td>\n                <td class="right-div">\n                    <input type="text"/>\n                </td>\n                <td>\n                        <button class="button del_row_btn mo-sf-btn-cstm" onclick="deleteAttr(event);return false;">X</button>\n                </td>\n            </tr>\n            `);e.children().last().children().find("select").selectWoo({width:"300px"})}),window.changeField=function(e){let n=e.target.value,t=field_map.get(n),o=jQuery(e.target).parent().siblings(".right-div");"picklist"===t.type?(options=`<select name="custom_${t.name}" class="custom_fields" style="width:100%;">`,t.picklistValues.forEach(({value:e,label:n})=>{options+=`<option value="${e}">${n}</option>`}),options+="</select>",o=o.children().remove().end().append(options),o.find("select").selectWoo({width:"100%"})):"boolean"===t.type?(options=`\n            <select name="custom_${t.name}" class="custom_fields mo-sf-select-width">\n                <option>true</option>\n                <option>false</option>\n            </select>\n            `,o=o.children().remove().end().append(options)):o.children().remove().end().append(`\n                <input type="text" name="custom_${t.name}" class="custom_fields" style="width:100%;"/>\n            `)},window.changeWPField=function(e){let n,t;if("__custom__"===e.target.value)return n=jQuery(e.target).parent(),void n.replaceWith('\n                <input type="text" onchange="changeWPField(event)" style="width:300px"/>\n            ');n=jQuery(e.target).is("input")?jQuery(e.target).siblings().children("select"):jQuery(e.target).parent().siblings().children("select"),t=jQuery(e.target).val(),n.attr("name",t)},window.deleteAttr=function(e,n){sf_wp=jQuery("#sync_sf_to_wp").is(":checked");jQuery(e.target).parent().parent().parent().parent().parent().remove();"object"==typeof n?del_name=n.id:(n=JSON.stringify(n),n=n.split(" "),del_name=n[1]);let t=field_map.get(del_name);!0===t.updateable?jQuery("#sel_sf_field").append(`<option value=${t.name}>${t.label} (${t.type})</option>`):jQuery("#sel_sf_field").append(`<option value=${t.name}>${t.label} (${t.type}) [Non Updatable Field]</option>`)},config_mode_radio=jQuery("input[name=config_mode]:checked","#app_config_save_client_configuration").val(),"undefined"!==config_mode_radio&&p(config_mode_radio),jQuery("#app_config_save_client_configuration input").on("change",function(){config_mode_radio=jQuery("input[name=config_mode]:checked","#app_config_save_client_configuration").val(),p(config_mode_radio)}),selected_radio=jQuery("input[name=env_select]:checked","#app_config_save_client_configuration").val(),"undefined"!==selected_radio&&u(selected_radio),jQuery("#app_config_save_client_configuration input").on("change",function(){selected_radio=jQuery("input[name=env_select]:checked","#app_config_save_client_configuration").val(),u(selected_radio)}),jQuery("#save_config").hide(),jQuery("#test-config").show(),document.getElementById("mo_sf_sync_app_type")&&(app_type=document.getElementById("mo_sf_sync_app_type").value,"manual"===app_type?mo_sf_sync_show_manual_configuration():"preconnected"===app_type&&mo_sf_sync_show_automatic_configuration())}),jQuery.fn.isInViewport=function(){var e=jQuery(this).offset().top,n=e+jQuery(this).outerHeight(),t=jQuery(window).scrollTop(),o=t+jQuery(window).height();return n>t&&e<o};